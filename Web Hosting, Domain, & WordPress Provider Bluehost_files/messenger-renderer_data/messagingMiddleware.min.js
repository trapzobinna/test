/*!
 * messenger
 * @version: 2.12.5
 * @license: Genesys Cloud Services, Inc.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.messagingMiddleware=t():e.messagingMiddleware=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";n.r(t),n.d(t,"connect",(function(){return r})),n.d(t,"connecting",(function(){return i})),n.d(t,"reconnect",(function(){return o})),n.d(t,"reconnecting",(function(){return d})),n.d(t,"connected",(function(){return a})),n.d(t,"reconnected",(function(){return c})),n.d(t,"disconnect",(function(){return s})),n.d(t,"disconnected",(function(){return u})),n.d(t,"pending",(function(){return p})),n.d(t,"readyToSend",(function(){return f})),n.d(t,"restored",(function(){return E})),n.d(t,"restoring",(function(){return l})),n.d(t,"reopen",(function(){return g})),n.d(t,"restoreAuthSession",(function(){return y})),n.d(t,"fetchHistory",(function(){return S})),n.d(t,"fetchingHistory",(function(){return T})),n.d(t,"historyFetched",(function(){return C})),n.d(t,"historyComplete",(function(){return O})),n.d(t,"requestUpload",(function(){return N})),n.d(t,"requestingUpload",(function(){return h})),n.d(t,"uploadApproved",(function(){return m})),n.d(t,"uploadFile",(function(){return R})),n.d(t,"fileUploading",(function(){return I})),n.d(t,"fileUploaded",(function(){return F})),n.d(t,"fileUploadFailed",(function(){return v})),n.d(t,"fileDownloadError",(function(){return D})),n.d(t,"getFile",(function(){return A})),n.d(t,"refreshFiles",(function(){return L})),n.d(t,"refreshingFiles",(function(){return M})),n.d(t,"requestingFile",(function(){return U})),n.d(t,"messagesUpdated",(function(){return P})),n.d(t,"deleteFile",(function(){return b})),n.d(t,"deletingFile",(function(){return w})),n.d(t,"fileDeleted",(function(){return G})),n.d(t,"downloadFile",(function(){return H})),n.d(t,"allowedFileTypesUpdated",(function(){return k})),n.d(t,"send",(function(){return j})),n.d(t,"sending",(function(){return _})),n.d(t,"sendTextBack",(function(){return x})),n.d(t,"sendingTextBack",(function(){return V})),n.d(t,"sendTyping",(function(){return Y})),n.d(t,"received",(function(){return B})),n.d(t,"sendingMessage",(function(){return W})),n.d(t,"receivedTyping",(function(){return q})),n.d(t,"resetTyping",(function(){return K})),n.d(t,"clearTypingTimeout",(function(){return Q})),n.d(t,"userTyping",(function(){return X})),n.d(t,"openedConversation",(function(){return z})),n.d(t,"addMessages",(function(){return J})),n.d(t,"end",(function(){return Z})),n.d(t,"ended",(function(){return $})),n.d(t,"clearConversation",(function(){return ee})),n.d(t,"conversationCleared",(function(){return te})),n.d(t,"messengerCleared",(function(){return ne})),n.d(t,"closed",(function(){return re})),n.d(t,"openWithStore",(function(){return ie})),n.d(t,"logout",(function(){return oe})),n.d(t,"reAuthenticate",(function(){return de})),n.d(t,"authenticated",(function(){return ae})),n.d(t,"steppingUpConversation",(function(){return ce})),n.d(t,"conversationSteppedUp",(function(){return se})),n.d(t,"stepupFailed",(function(){return ue})),n.d(t,"sessionLoggedOut",(function(){return pe})),n.d(t,"error",(function(){return fe})),n.d(t,"clearError",(function(){return Ee})),n.d(t,"startFailed",(function(){return le})),n.d(t,"sendFailed",(function(){return ge})),n.d(t,"restoreFailed",(function(){return ye})),n.d(t,"offline",(function(){return Se})),n.d(t,"sessionExpired",(function(){return Te})),n.d(t,"fetchHistoryFailed",(function(){return Ce})),n.d(t,"clearSession",(function(){return Oe})),n.d(t,"resetConversation",(function(){return Ne})),n.d(t,"sessionCleared",(function(){return he})),n.d(t,"connectionClosed",(function(){return me})),n.d(t,"readOnly",(function(){return Re})),n.d(t,"conversationNotFound",(function(){return Ie}));const r=e=>({type:"CONNECT",data:e}),i=()=>({type:"CONNECTING"}),o=()=>({type:"RECONNECT"}),d=e=>({type:"RECONNECTING",data:e}),a=e=>({type:"CONNECTED",data:e}),c=e=>({type:"RECONNECTED",data:e}),s=()=>({type:"DISCONNECT"}),u=e=>({type:"DISCONNECTED",data:e}),p=()=>({type:"PENDING"}),f=()=>({type:"READYTOSEND"}),E=e=>({type:"RESTORED",data:e}),l=()=>({type:"RESTORING"}),g=e=>({type:"REOPEN",data:e}),y=()=>({type:"RESTOREAUTHSESSION"}),S=()=>({type:"FETCHHISTORY"}),T=()=>({type:"FETCHINGHISTORY"}),C=e=>({type:"HISTORYFETCHED",data:e}),O=()=>({type:"HISTORYCOMPLETE"}),N=e=>({type:"REQUESTUPLOAD",data:e}),h=e=>({type:"REQUESTINGUPLOAD",data:e}),m=e=>({type:"UPLOADAPPROVED",data:e}),R=e=>({type:"UPLOADFILE",data:e}),I=e=>({type:"FILEUPLOADING",data:e}),F=e=>({type:"FILEUPLOADED",data:e}),v=e=>({type:"FILEUPLOADFAILED",data:e}),D=e=>({type:"FILEDOWNLOADERROR",data:e}),A=e=>({type:"GETFILE",data:e}),L=e=>({type:"REFRESHFILES",data:e}),M=e=>({type:"REFRESHINGFILES",data:e}),U=e=>({type:"REQUESTINGFILE",data:e}),P=e=>({type:"MESSAGESUPDATED",data:e}),b=e=>({type:"DELETEFILE",data:e}),w=e=>({type:"DELETINGFILE",data:e}),G=e=>({type:"FILEDELETED",data:e}),H=e=>({type:"DOWNLOADFILE",data:e}),k=e=>({type:"ALLOWEDFILETYPESUPDATED",data:e}),j=e=>({type:"SEND",data:e}),_=()=>({type:"SENDING"}),x=e=>({type:"SENDTEXTBACK",data:e}),V=()=>({type:"SENDINGTEXTBACK"}),Y=()=>({type:"SENDTYPING"}),B=e=>({type:"RECEIVED",data:e}),W=e=>({type:"SENDINGMESSAGE",data:e}),q=e=>({type:"RECEIVEDTYPING",data:e}),K=()=>({type:"RESETTYPING"}),Q=()=>({type:"CLEARTYPINGTIMEOUT"}),X=()=>({type:"USERTYPING"}),z=()=>({type:"OPENEDCONVERSATION"}),J=e=>({type:"ADDMESSAGES",data:e}),Z=e=>({type:"END",data:e}),$=e=>({type:"ENDED",data:e}),ee=e=>({type:"CLEARCONVERSATION",data:e}),te=e=>({type:"CONVERSATIONCLEARED",data:e}),ne=()=>({type:"CLEARMESSENGER"}),re=()=>({type:"CLOSED"}),ie=e=>({type:"OPEN-WITH-STORE",data:e}),oe=()=>({type:"LOGOUT"}),de=()=>({type:"REAUTHENTICATE"}),ae=()=>({type:"AUTHENTICATED"}),ce=()=>({type:"STEPPINGUPCONVERSATION"}),se=()=>({type:"CONVERSATIONSTEPPEDUP"}),ue=()=>({type:"STEPUPFAILED"}),pe=()=>({type:"SESSIONLOGGEDOUT"}),fe=e=>({type:"ERROR",data:e}),Ee=()=>({type:"CLEARERROR"}),le=e=>({type:"STARTFAILED",data:e}),ge=e=>({type:"SENDFAILED",data:e}),ye=e=>({type:"RESTOREFAILED",data:e}),Se=e=>({type:"OFFLINE",data:e}),Te=e=>({type:"SESSIONEXPIRED",data:e}),Ce=e=>({type:"FETCHHISTORYFAILED",data:e}),Oe=e=>({type:"CLEARSESSION",data:e}),Ne=e=>({type:"RESETCONVERSATION"}),he=e=>({type:"SESSIONCLEARED",data:e}),me=()=>({type:"CONNECTIONCLOSED"}),Re=e=>({type:"READONLY",data:e}),Ie=()=>({type:"CONVERSATIONNOTFOUND"})},function(e,t,n){"use strict";function r(e){return{type:"CONFIRM_CHAT",route:e.route}}function i(e){return{type:"OPEN_CONVERSATIONS",route:e.route}}function o(e){return{type:"OPEN_COBROWSE_CONNECT",route:e.route}}function d(e){return{type:"COBROWSE_SHARE",route:e.route,cobrowseConnectStatus:e.cobrowseConnectStatus}}function a(e){return{type:"COBROWSE_CONNECT_STATUS",cobrowseConnectStatus:e.cobrowseConnectStatus}}function c(e){return{type:"OPEN_PREVIEW",route:e.route,file:e.file}}function s(e){return{type:"OPEN_DATE_PICKER",route:e.route}}function u(){return{type:"NAVIGATE_BACK"}}function p(e){const{cobrowseConnectStatus:t}=e||{};return{type:"NAVIGATE_TO_HOME",cobrowseConnectStatus:t||""}}n.r(t),n.d(t,"confirmChat",(function(){return r})),n.d(t,"openConversations",(function(){return i})),n.d(t,"openCobrowseConnect",(function(){return o})),n.d(t,"cobrowseShare",(function(){return d})),n.d(t,"setCobrowseConnectStatus",(function(){return a})),n.d(t,"openPreview",(function(){return c})),n.d(t,"openDatePicker",(function(){return s})),n.d(t,"navigateBack",(function(){return u})),n.d(t,"navigateToHome",(function(){return p})),n.d(t,"setConfig",(function(){return E})),n.d(t,"getConfig",(function(){return l}));let f={};function E(e){e&&(f=e)}function l(){return f}},function(e,t,n){e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"onMessage",(function(){return o})),n.d(t,"onTyping",(function(){return d})),n.d(t,"onTypingTimeout",(function(){return a})),n.d(t,"onReadyToSend",(function(){return c})),n.d(t,"onStarting",(function(){return s})),n.d(t,"onStart",(function(){return u})),n.d(t,"onSendingMessage",(function(){return p})),n.d(t,"onMessageError",(function(){return f})),n.d(t,"onEnd",(function(){return E})),n.d(t,"onDisconnect",(function(){return l})),n.d(t,"onError",(function(){return g})),n.d(t,"onStartFailed",(function(){return y})),n.d(t,"onSendFailed",(function(){return S})),n.d(t,"onSessionExpired",(function(){return T})),n.d(t,"onSessionCleared",(function(){return C})),n.d(t,"onFetchHistoryFailed",(function(){return O})),n.d(t,"onRestoring",(function(){return N})),n.d(t,"onRestoreFailed",(function(){return h})),n.d(t,"onRestored",(function(){return m})),n.d(t,"onFetchingHistory",(function(){return R})),n.d(t,"onHistoryFetched",(function(){return I})),n.d(t,"onHistoryComplete",(function(){return F})),n.d(t,"onReconnecting",(function(){return v})),n.d(t,"onReopen",(function(){return D})),n.d(t,"onConnectionClosed",(function(){return A})),n.d(t,"onConversationCleared",(function(){return L})),n.d(t,"onOffline",(function(){return M})),n.d(t,"onReconnected",(function(){return U})),n.d(t,"onUploadApproved",(function(){return P})),n.d(t,"onFileUploaded",(function(){return b})),n.d(t,"onFileUploadFailed",(function(){return w})),n.d(t,"onFileDownloadError",(function(){return G})),n.d(t,"onFileUploading",(function(){return H})),n.d(t,"onFileDeleted",(function(){return k})),n.d(t,"onMessagesUpdated",(function(){return j})),n.d(t,"onLogout",(function(){return _})),n.d(t,"onReauthenticate",(function(){return x})),n.d(t,"onAuthenticated",(function(){return V})),n.d(t,"onReadOnly",(function(){return Y})),n.d(t,"onSessionReset",(function(){return B})),n.d(t,"onConversationNotFound",(function(){return W})),n.d(t,"onAllowedFileTypesUpdated",(function(){return q})),n.d(t,"onConversationSteppedUp",(function(){return K})),n.d(t,"onSteppingUpConversation",(function(){return Q})),n.d(t,"onStepupFailed",(function(){return X})),n.d(t,"onMessengerCleared",(function(){return z}));var r=n(0),i=n(1);let o=()=>{},d=()=>{},a=()=>{},c=()=>{},s=()=>{},u=()=>{},p=()=>{},f=()=>{},E=()=>{},l=()=>{},g=()=>{},y=()=>{},S=()=>{},T=()=>{},C=()=>{},O=()=>{},N=()=>{},h=()=>{},m=()=>{},R=()=>{},I=()=>{},F=()=>{},v=()=>{},D=()=>{},A=()=>{},L=()=>{},M=()=>{},U=()=>{},P=()=>{},b=()=>{},w=()=>{},G=()=>{},H=()=>{},k=()=>{},j=()=>{},_=()=>{},x=()=>{},V=()=>{},Y=()=>{},B=()=>{},W=()=>{},q=()=>{},K=()=>{},Q=()=>{},X=()=>{},z=()=>{};t.default=(()=>{let e="",t=!1,n={},f={},B=!1,J="";return Genesys("registerPlugin","MessagingMiddleware",(function(n){e=n;const o=e=>{const{text:t,messageType:n,type:r,timestamp:i,originatingEntity:o,id:d,...a}=e||{};return{id:d||Math.round(1e6*Math.random()),messageType:n,originatingEntity:o||"",text:t,timestamp:i||Date().toString(),type:r,...a}};e.registerCommand("showTyping",(function(e){let t=i.getConfig(),{preview:n}=t,o=5e3,{duration:d}=e.data||{};d&&"number"==typeof d&&!Number.isNaN(d)&&(o=d),n?(f.dispatch(r.connected()),f.dispatch(r.receivedTyping({type:"On"})),J||(J=setTimeout((()=>{f.dispatch(r.resetTyping()),J=""}),o)),e.resolve()):e.reject("Command is allowed only in preview mode.")})),e.registerCommand("removeTyping",(function(e){let t=i.getConfig(),{preview:n}=t;n?(f.dispatch(r.connected()),f.dispatch(r.resetTyping()),J="",e.resolve()):e.reject("Command is allowed only in preview mode.")})),e.registerCommand("addMessages",(function(e){let t=i.getConfig(),{preview:n}=t;if(n)if(e.data){if(Array.isArray(e.data)){const t=[];e.data.forEach((e=>{t.push(o(e))})),f.dispatch(r.connected()),f.dispatch(r.addMessages(t)),e.resolve()}else if("object"==typeof e.data){const t=o(e.data);f.dispatch(r.connected()),f.dispatch(r.received(t||e.data.message)),e.resolve()}}else e.reject("No messages to add");else e.reject("Command is allowed only in preview mode.")})),e.registerCommand("updateMessages",(function(e){let t=i.getConfig(),{preview:n}=t;if(n)if(e.data){if(Array.isArray(e.data)){const t=[];e.data.forEach((e=>{e={...e,updatedTime:(new Date).toISOString()},t.push(o(e))})),f.dispatch(r.connected()),f.dispatch(r.messagesUpdated({updatedMessages:t})),e.resolve()}else if("object"==typeof e.data){let t=o(e.data);t={...t,updatedTime:(new Date).toISOString()},f.dispatch(r.connected()),f.dispatch(r.messagesUpdated({updatedMessages:[t||{...e.data,updatedTime:(new Date).toISOString()}]})),e.resolve()}}else e.reject("No messages to add");else e.reject("Command is allowed only in preview mode.")})),e.registerCommand("clear",(function(e){let t=i.getConfig(),{preview:n}=t;n?(f.dispatch(r.sessionCleared({messages:[]})),e.resolve()):e.reject("Command only allowed in preview mode")})),e.subscribe("MessagingPreview.ready",(()=>{t=!0})),B||(e.ready(),B=!0)})),J=>Z=>$=>{f=J,s=e=>{J.dispatch(r.connecting(e))},N=()=>{J.dispatch(r.restoring())},m=e=>{J.dispatch(r.restored(e))},R=()=>{J.dispatch(r.fetchingHistory())},I=e=>{J.dispatch(r.historyFetched(e))},F=()=>{J.dispatch(r.historyComplete())},y=e=>{J.dispatch(r.startFailed(e))},T=()=>{J.dispatch(r.sessionExpired())},O=e=>{J.dispatch(r.fetchHistoryFailed(e))},S=e=>{J.dispatch(r.sendFailed(e))},w=e=>{J.dispatch(r.fileUploadFailed(e))},G=e=>{J.dispatch(r.fileDownloadError(e))},H=e=>{J.dispatch(r.fileUploading(e))},b=e=>{J.dispatch(r.fileUploaded(e))},j=e=>{J.dispatch(r.messagesUpdated(e))},k=e=>{J.dispatch(r.fileDeleted(e))},h=e=>{J.dispatch(r.restoreFailed(e))},M=e=>{J.dispatch(r.offline(e))},U=e=>{J.dispatch(r.reconnected(e))},v=e=>{J.dispatch(r.reconnecting(e))},A=()=>{J.dispatch(r.connectionClosed())},L=e=>{J.dispatch(r.conversationCleared(e))},g=e=>{J.dispatch(r.error(e))},o=e=>{e&&e.messages&&J.dispatch(r.received(e.messages))},p=e=>{J.dispatch(r.sendingMessage(e))},d=e=>{e&&e.typing&&J.dispatch(r.receivedTyping(e.typing))},a=()=>{J.dispatch(r.resetTyping())},c=()=>{J.dispatch(r.readyToSend())},u=e=>{J.dispatch(r.connected(e))},C=e=>{J.dispatch(r.sessionCleared(e))},D=e=>{J.dispatch(r.reopen(e))},_=()=>{J.dispatch(r.logout())},x=()=>{J.dispatch(r.reAuthenticate())},V=()=>{J.dispatch(r.authenticated())},Q=()=>{J.dispatch(r.steppingUpConversation())},K=()=>{J.dispatch(r.conversationSteppedUp())},X=()=>{J.dispatch(r.stepupFailed())},z=()=>{J.dispatch(r.messengerCleared())},Y=e=>{J.dispatch(r.readOnly(e))},l=e=>{J.dispatch(r.disconnected(e))},W=()=>{J.dispatch(r.conversationNotFound())},q=e=>{J.dispatch(r.allowedFileTypesUpdated(e))},n=i.getConfig();const{preview:ee}=n||{};switch(e&&!B&&(e.ready(),B=!0),$.type){case"CONNECT":if(!ee){let t=i.getConfig(),{preview:n}=t;n?J.dispatch(r.connected()):e.command("MessagingService.configureConversation",$.data)}break;case"RECONNECT":if(!ee){let t=i.getConfig(),{preview:n}=t;n?J.dispatch(r.reconnected()):e.command("MessagingService.reconnect")}break;case"SEND":ee&&t?e.command("MessagingPreview.sendMessage",$.data).then((e=>{J.dispatch(r.received(e))})):(J.dispatch(r.sending()),e.command("MessagingService.sendMessage",$.data));break;case"SENDTEXTBACK":ee&&t?e.command("MessagingPreview.sendMessage",$.data).then((e=>{J.dispatch(r.received(e))})):(J.dispatch(r.sendingTextBack()),e.command("MessagingService.sendMessage",$.data));break;case"SENDTYPING":J.dispatch(r.userTyping()),ee||e.command("MessagingService.sendTyping");break;case"CLEARTYPINGTIMEOUT":J.dispatch(r.resetTyping()),ee||e.command("MessagingService.clearTypingTimeout");break;case"OPENEDCONVERSATION":Genesys("subscribe","MessagingMiddleware.ready",(()=>{setTimeout((()=>{ee||e.command("MessagingService.joinConversation")}),200)}));break;case"REQUESTUPLOAD":ee||(P=e=>{e&&J.dispatch(r.uploadApproved(e))},J.dispatch(r.requestingUpload($.data)),e.command("MessagingService.requestUpload",{file:$.data}));break;case"UPLOADFILE":ee||(J.dispatch(r.fileUploading()),e.command("MessagingService.uploadFile",$.data));break;case"DELETEFILE":ee||(J.dispatch(r.deletingFile()),e.command("MessagingService.deleteFile",$.data));break;case"GETFILE":ee||(J.dispatch(r.requestingFile()),e.command("MessagingService.getFile",$.data));break;case"REFRESHFILES":ee||(J.dispatch(r.refreshingFiles()),e.command("MessagingService.refreshFiles",{files:$.data}));break;case"END":ee||(E=e=>{J.dispatch(r.ended(e))},e.command("MessagingService.endConversation"));break;case"CLEARSESSION":e.command("MessagingService.clearSession",$.data);break;case"RESETCONVERSATION":e.command("MessagingService.resetConversation",$.data);break;case"CLEARCONVERSATION":e.command("MessagingService.clearConversation",$.data);break;case"FETCHHISTORY":ee||(I=e=>{J.dispatch(r.historyFetched(e))},e&&e.command("MessagingService.fetchHistory"));break;case"DOWNLOADFILE":ee||e.command("MessagingService.downloadFile",$.data);break;case"RESTOREAUTHSESSION":ee||e.command("MessagingService.restoreAuthSession");break;default:return Z($)}}})()}])}));